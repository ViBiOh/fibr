{{ define "map-modal" }}
  <style type="text/css" nonce="{{ .nonce }}">
    #map:target {
      display: flex;
      z-index: 5;
    }

    #map:target ~ .content {
      pointer-events: none;
    }
  </style>

  <div id="map" class="modal">
    <div class="modal-content no-background">
      <h2 class="flex flex-center header no-margin">
        <span>Map</span>
        <span class="flex-grow"></span>
        <a href="#" class="button white small">Close</a>
      </h2>

      {{ $geoURL := "?geojson" }}
      {{ if .Search }}
        {{ $geoURL = printf "%s&%s" $geoURL .Search.Encode }}
      {{ end }}

      <div id="map-container" class="flex flex-center">
        <noscript class="white">
          <h2>You must enable Javascript to have interactive map with pictures.</h2>
          <p>
            GeoJSON data are available on <a class="primary" href="{{ $geoURL }}">this link</a>
          </p>
        </noscript>
      </div>

      <style type="text/css" nonce="{{ .nonce }}">
        #map-container {
          background-color: var(--grey);
          color: var(--dark);
          height: 80vh;
          width: 80vw;
        }

        .thumbnail-img {
          height: 15rem;
        }

        .thumbnail-popup {
          bottom: 55px !important;
          height: 15rem;
          width: 19rem;
        }

        .map-throbber {
          z-index: 500;
        }

        .map-throbber .throbber-dot {
          height: 3.2rem;
          width: 3.2rem;
        }
      </style>

      <script type="text/javascript" src="/scripts/map.js?v={{ .Version }}"></script>

      <script type="text/javascript" nonce="{{ .nonce }}">
        const geoURL = '{{ $geoURL }}'
      </script>
    </div>
  </div>
{{ end }}
