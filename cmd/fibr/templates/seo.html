{{ define "seo" }}
  {{ $title := "fibr" }}
  {{ $description := "FIle BRowser" }}
  {{ $url := publicURL "/" }}

  {{ with .Request }}
    {{ $title = .Title }}
    {{ $description = .Description }}
    {{ $url = publicURL .Path }}
  {{ end }}

  {{ if .File }}
    {{ if not .File.IsDir }}
      {{ $url = printf "%s%s" $url "?browser" }}
    {{ end }}
  {{ end }}

  <title>{{ $title }}</title>
  <meta name="description" content="{{ $description }}">
  <link rel="canonical" href="{{ $url }}">

  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ $url }}">
  <meta property="og:title" content="{{ $title }}">
  <meta property="og:description" content="{{ $description }}">

  {{ if .File }}
    {{ if .File.IsVideo }}
      <meta property="og:video" content="{{ $url }}">
      <meta property="og:video:type" content="{{ .File.Mime }}">
    {{ end }}
  {{ end }}

  {{ if .Cover.Img }}
    {{ if .File }}
      <meta property="og:image" content="{{ publicURL (.Request.AbsoluteURL .Request.Item) }}?thumbnail">
      <meta property="og:image:alt" content="Thumbnail of {{ .File.Name }}">
    {{ else }}
      <meta property="og:image" content="{{ publicURL (.Request.AbsoluteURL .Cover.Img.Name) }}?thumbnail">
      <meta property="og:image:alt" content="Thumbnail of content">
    {{ end }}
    <meta property="og:image:type" content="image/webp">
    <meta property="og:image:width" content="{{ .Cover.ImgWidth }}">
    <meta property="og:image:width" content="{{ .Cover.ImgWidth }}">
  {{ else }}
    <meta property="og:image" content="{{ publicURL "/images/favicon/android-chrome-512x512.png" }}?v={{ .Version }}">
    <meta property="og:image:type" content="image/png">
    <meta property="og:image:height" content="512">
    <meta property="og:image:width" content="512">
    <meta property="og:image:alt" content="Fibr logo">
  {{ end }}
{{ end }}
