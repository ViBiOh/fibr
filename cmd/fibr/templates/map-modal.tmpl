{{ define "map-modal" }}
  <div id="map" class="modal">
    <div class="modal-content no-background">
      <h2 class="flex flex-center header no-margin">
        <span>Map</span>
        <span class="flex-grow"></span>
        <a href="#" class="button white small">Close</a>
      </h2>

      {{ $geoURL := "?geojson" }}
      {{ if .Search }}
        {{ $geoURL = printf "%s&%s" $geoURL .Search.Encode }}
      {{ end }}

      <div id="map-container" class="flex flex-center">
        <noscript class="white">
          <h2>You must enable Javascript to have interactive map with pictures.</h2>
          <p>
            GeoJSON data are available on <a class="primary" href="{{ $geoURL }}">this link</a>
          </p>
        </noscript>
      </div>

      <script type="text/javascript" nonce="{{ .nonce }}">
        const geoURL = '{{ $geoURL }}'
      </script>
    </div>
  </div>
{{ end }}
