{{- define "file" -}}
  {{- template "layout" . -}}

  <div class="browser">
    {{- if .Content.File.IsVideo -}}
      <video controls src="{{- .Content.File.Pathname -}}" type="{{ .Content.File.Mime -}}"></video>
    {{- else -}}
      {{- if .Content.File.IsImage -}}
        <img src="{{- .Content.File.Pathname -}}" alt="{{- .Content.File.Name -}}" />
      {{- else -}}
        <object data="{{- .Content.File.Pathname -}}" type="{{ .Content.File.Mime -}}"></object>
      {{- end -}}
    {{- end -}}

    {{- if .Content.Previous -}}
      <div class="hover-side left-side">
        <a href="{{- .Content.Previous.Name -}}?browser=true" class="hover-nav">
          <span class="icon icon-chevron-left" alt="Previous"></span>
        </a>
      </div>
    {{- end -}}

    {{- if .Content.Next -}}
      <div class="hover-side right-side">
        <a href="{{- .Content.Next.Name -}}?browser=true" class="hover-side right-side hover-nav">
          <span class="icon icon-chevron-right" alt="Next"></span>
        </a>
      </div>
    {{- end -}}
  </div>

  {{- template "footer" . -}}

  {{- if or .Content.Next .Content.Previous -}}
    <script type="text/javascript" src="https://unpkg.com/hammerjs@2.0.8/hammer.min.js"></script>
    <script type="text/javascript">
      /**
       * Handle Previous/next.
       */
      window.onkeyup = function(e) {
        {{- if .Content.Previous -}}
          if (e.keyCode === 37) {
            window.location.href = '{{- .Content.Previous.Name -}}?browser=true';
          }
        {{- end -}}

        {{- if .Content.Next -}}
          if (e.keyCode === 39) {
            window.location.href = '{{- .Content.Next.Name -}}?browser=true';
          }
        {{- end -}}
      };

      if (Hammer) {
        var mc = new Hammer(document.querySelector('.browser'));
        {{- if .Content.Previous -}}
          mc.on('panleft', () =>  window.location.href = '{{- .Content.Previous.Name -}}?browser=true');
        {{- end -}}

        {{- if .Content.Next -}}
          mc.on('panright', () =>  window.location.href = '{{- .Content.Next.Name -}}?browser=true');
        {{- end -}}
      }
    </script>
  {{- end -}}
{{- end -}}
